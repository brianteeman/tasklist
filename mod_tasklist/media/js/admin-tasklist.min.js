function tasklist(){addTask();const e=document.getElementById("add-btn"),t=document.querySelector(".txt-input");e.addEventListener("click",(function(){const e=t.value.trim();if(e){t.value="";const n=localStorage.getItem("tasks")?JSON.parse(localStorage.getItem("tasks")):[],c={taskTitle:e,isCompleted:!1};addTask([c]),n.push(c),localStorage.setItem("tasks",JSON.stringify(n))}t.focus()})),t.addEventListener("keydown",(function(t){13===t.keyCode&&e.click()})),document.querySelector(".filter").addEventListener("click",(function(e){const t=e.target.id;t&&(document.querySelector(".on").classList.remove("on"),document.getElementById(t).classList.add("on"),document.querySelector(".tasks").className=`tasks ${t}`)})),document.getElementById("clear-completed").addEventListener("click",(function(){deleteIndexes=[],document.querySelectorAll(".card.checked").forEach((function(e){deleteIndexes.push([...document.querySelectorAll(".tasks .card")].indexOf(e)),setTimeout((function(){e.remove()}),100)})),removeManyTask(deleteIndexes)}))}function stateTask(e,t){const n=JSON.parse(localStorage.getItem("tasks"));n[e].isCompleted=t,localStorage.setItem("tasks",JSON.stringify(n))}function removeTask(e){const t=JSON.parse(localStorage.getItem("tasks"));t.splice(e,1),localStorage.setItem("tasks",JSON.stringify(t))}function removeManyTask(e){let t=JSON.parse(localStorage.getItem("tasks"));t=t.filter((function(t,n){return!e.includes(n)})),localStorage.setItem("tasks",JSON.stringify(t))}function addTask(e=JSON.parse(localStorage.getItem("tasks"))){if(!e)return null;const t=document.getElementById("items-left");e.forEach((function(e){const n=document.createElement("li"),c=document.createElement("div"),s=document.createElement("input"),a=document.createElement("span"),o=document.createElement("p"),d=document.createElement("button");n.classList.add("card"),d.classList.add("clear"),c.classList.add("cb-container"),a.classList.add("check"),d.classList.add("clear"),s.setAttribute("type","checkbox"),d.setAttribute("aria-label",Joomla.Text._("MOD_TASKLIST_DELETE")),o.textContent=e.taskTitle,e.isCompleted&&(n.classList.add("checked"),s.setAttribute("checked","checked")),s.addEventListener("click",(function(){const e=this.parentElement.parentElement,n=this.checked;stateTask([...document.querySelectorAll(".tasks .card")].indexOf(e),n),n?e.classList.add("checked"):e.classList.remove("checked"),t.textContent=document.querySelectorAll(".tasks .card:not(.checked)").length})),d.addEventListener("click",(function(){const e=this.parentElement;removeTask([...document.querySelectorAll(".tasks .card")].indexOf(e)),setTimeout((function(){e.remove(),t.textContent=document.querySelectorAll(".tasks .card:not(.checked)").length}),100)})),c.appendChild(s),c.appendChild(a),n.appendChild(c),n.appendChild(o),n.appendChild(d),document.querySelector(".tasks").appendChild(n)})),t.textContent=document.querySelectorAll(".tasks .card:not(.checked)").length,t.textContent=Joomla.Text._("MOD_TASKLIST_TODO").replace("%s",t.textContent)}document.addEventListener("DOMContentLoaded",tasklist);